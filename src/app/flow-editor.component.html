<div class="app-container">
    <div class="sidebar">
        <h3>Ferramentas</h3>

        <button *ngFor="let tool of tools" (click)="addNode(tool.id, tool.label)">
            <span *ngIf="tool.icon" style="margin-right: 5px;">{{ tool.icon }}</span>
            {{ tool.label }}
        </button>

        <hr style="border: 0; border-top: 1px solid #eee; margin: 10px 0;">
        <h4 style="margin: 5px 0; color: #666; font-size: 12px; text-transform: uppercase;">L√≥gica</h4>

        <button (click)="addNode('if')" style="border-left: 4px solid #faad14; background: #fffbe6;">
            üîÄ IF Condition
        </button>

        <hr>
        <div class="instruction">
            <small>üñ±Ô∏è Arrastar e Conectar</small><br>
            <small>üóëÔ∏è Delete para apagar</small><br>
            <small>‚úèÔ∏è Clique Duplo no IF</small>
        </div>
    </div>

    <div #container class="graph-container"></div>

    <div class="modal-overlay" *ngIf="showModal">
        <div class="modal-content">
            <h3>Configurar Condi√ß√£o</h3>

            <div class="form-group">
                <label>Propriedade:</label>
                <select [(ngModel)]="selectedProperty" (change)="onPropertyChange()">
                    <option [ngValue]="null" disabled>Selecione...</option>
                    <option *ngFor="let prop of properties" [ngValue]="prop">
                        {{ prop.label }} ({{ prop.type }})
                    </option>
                </select>
            </div>

            <div class="form-group" *ngIf="selectedProperty">
                <label>Compara√ß√£o:</label>
                <select [(ngModel)]="selectedOperator">
                    <option value="" disabled>Selecione...</option>
                    <option *ngFor="let op of availableOperators" [value]="op.id">
                        {{ op.label }}
                    </option>
                </select>
            </div>

            <div class="form-group" *ngIf="selectedOperator && selectedProperty?.type !== 'boolean'">
                <label>Valor:</label>
                <input *ngIf="selectedProperty?.type === 'number'" type="number" [(ngModel)]="conditionValue">
                <input *ngIf="selectedProperty?.type === 'string'" type="text" [(ngModel)]="conditionValue">
                <input *ngIf="selectedProperty?.type === 'date'" type="date" [(ngModel)]="conditionValue">
            </div>

            <div class="modal-actions">
                <button (click)="closeModal()">Cancelar</button>
                <button class="save-btn" (click)="saveCondition()" [disabled]="!selectedProperty || !selectedOperator">
                    Salvar
                </button>
            </div>
        </div>
    </div>
</div>